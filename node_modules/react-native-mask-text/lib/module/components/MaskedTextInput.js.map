{"version":3,"sources":["MaskedTextInput.tsx"],"names":["React","useEffect","useState","forwardRef","TextInput","mask","unMask","MaskedTextInputComponent","ref","pattern","type","options","defaultValue","onChangeText","rest","defaultValueCustom","defaultValueCurrency","initialMaskedValue","initialUnMaskedValue","maskedValue","setMaskedValue","unMaskedValue","setUnmaskedValue","onChange","value","newUnMaskedValue","newMaskedValue","MaskedTextInput"],"mappings":";;AAAA,OAAOA,KAAP,IACEC,SADF,EAEEC,QAFF,EAGEC,UAHF,QAKO,OALP;AAMA,SAASC,SAAT,QAA0C,cAA1C;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,eAA7B;AAaA,OAAO,MAAMC,wBAGZ,GAAG,OASFC,GATE,KAUc;AAAA,MAThB;AACEH,IAAAA,IAAI,EAAEI,OAAO,GAAG,EADlB;AAEEC,IAAAA,IAAI,GAAG,QAFT;AAGEC,IAAAA,OAAO,GAAG,EAHZ;AAIEC,IAAAA,YAJF;AAKEC,IAAAA,YALF;AAME,OAAGC;AANL,GASgB;AAChB,QAAMC,kBAAkB,GAAGH,YAAY,IAAI,EAA3C;AACA,QAAMI,oBAAoB,GAAGJ,YAAY,IAAI,GAA7C;AAEA,QAAMK,kBAAkB,GAAMP,IAAI,KAAK,UAAT,GACxBL,IAAI,CAACW,oBAAD,EAAuBP,OAAvB,EAAgCC,IAAhC,EAAsCC,OAAtC,CADoB,GAExBN,IAAI,CAACU,kBAAD,EAAqBN,OAArB,EAA8BC,IAA9B,EAAoCC,OAApC,CAFV;AAIA,QAAMO,oBAAoB,GAAMR,IAAI,KAAK,UAAT,GAC1BJ,MAAM,CAACU,oBAAD,EAAuBN,IAAvB,CADoB,GAE1BJ,MAAM,CAACS,kBAAD,EAAqBL,IAArB,CAFZ;AAIA,QAAM,CAACS,WAAD,EAAcC,cAAd,IAAgClB,QAAQ,CAACe,kBAAD,CAA9C;AACA,QAAM,CAACI,aAAD,EAAgBC,gBAAhB,IAAoCpB,QAAQ,CAACgB,oBAAD,CAAlD;;AAEA,WAASK,QAAT,CAAkBC,KAAlB,EAAiC;AAC/B,UAAMC,gBAAgB,GAAGnB,MAAM,CAACkB,KAAD,EAAQd,IAAR,CAA/B;AACA,UAAMgB,cAAc,GAAGrB,IAAI,CAACoB,gBAAD,EAAmBhB,OAAnB,EAA4BC,IAA5B,EAAkCC,OAAlC,CAA3B;AAEAS,IAAAA,cAAc,CAACM,cAAD,CAAd;AACAJ,IAAAA,gBAAgB,CAACG,gBAAD,CAAhB;AACD;;AAEDxB,EAAAA,SAAS,CAAC,MAAM;AACdY,IAAAA,YAAY,CAACM,WAAD,EAAcE,aAAd,CAAZ;AACD,GAFQ,EAEN,CAACF,WAAD,EAAcE,aAAd,CAFM,CAAT;AAIA,sBACE,oBAAC,SAAD;AACE,IAAA,YAAY,EAAGG,KAAD,IAAWD,QAAQ,CAACC,KAAD,CADnC;AAEE,IAAA,GAAG,EAAEhB;AAFP,KAGMM,IAHN;AAIE,IAAA,KAAK,EAAEK;AAJT,KADF;AAQD,CAhDM;AAkDP,OAAO,MAAMQ,eAAe,gBAAGxB,UAAU,CAACI,wBAAD,CAAlC","sourcesContent":["import React, {\n  useEffect,\n  useState,\n  forwardRef,\n  ForwardRefRenderFunction,\n} from 'react'\nimport { TextInput, TextInputProps } from 'react-native'\nimport { mask, unMask } from '../utils/mask'\nimport type { MaskOptions } from '../@types/MaskOptions'\n\ntype TIProps = Omit<TextInputProps, 'onChangeText'>\n\nexport interface MaskedTextInputProps extends TIProps {\n  mask?: string\n  type?: 'custom' | 'currency'\n  options?: MaskOptions\n  defaultValue?: string\n  onChangeText: (text: string, rawText: string) => void\n}\n\nexport const MaskedTextInputComponent: ForwardRefRenderFunction<\n  TextInput,\n  MaskedTextInputProps\n> = (\n  {\n    mask: pattern = '',\n    type = 'custom',\n    options = {} as MaskOptions,\n    defaultValue,\n    onChangeText,\n    ...rest\n  },\n  ref\n): JSX.Element => {\n  const defaultValueCustom = defaultValue || ''\n  const defaultValueCurrency = defaultValue || '0'\n\n  const initialMaskedValue =    type === 'currency'\n      ? mask(defaultValueCurrency, pattern, type, options)\n      : mask(defaultValueCustom, pattern, type, options);\n\n  const initialUnMaskedValue =    type === 'currency'\n      ? unMask(defaultValueCurrency, type)\n      : unMask(defaultValueCustom, type);\n\n  const [maskedValue, setMaskedValue] = useState(initialMaskedValue);\n  const [unMaskedValue, setUnmaskedValue] = useState(initialUnMaskedValue);\n\n  function onChange(value: string) {\n    const newUnMaskedValue = unMask(value, type);\n    const newMaskedValue = mask(newUnMaskedValue, pattern, type, options);\n\n    setMaskedValue(newMaskedValue);\n    setUnmaskedValue(newUnMaskedValue);\n  }\n\n  useEffect(() => {\n    onChangeText(maskedValue, unMaskedValue);\n  }, [maskedValue, unMaskedValue]);\n\n  return (\n    <TextInput\n      onChangeText={(value) => onChange(value)}\n      ref={ref}\n      {...rest}\n      value={maskedValue}\n    />\n  );\n};\n\nexport const MaskedTextInput = forwardRef(MaskedTextInputComponent);\n"]}