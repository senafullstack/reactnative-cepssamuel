{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getIMGState = getIMGState;\n\nvar _extractImageStyleProps = _interopRequireDefault(require(\"./extractImageStyleProps\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction getIMGState(_ref) {\n  var error = _ref.error,\n      alt = _ref.alt,\n      altColor = _ref.altColor,\n      source = _ref.source,\n      containerStyle = _ref.containerStyle,\n      concreteDimensions = _ref.concreteDimensions,\n      initialDimensions = _ref.initialDimensions,\n      objectFit = _ref.objectFit,\n      onError = _ref.onError;\n\n  if (error) {\n    return {\n      type: 'error',\n      alt: alt,\n      altColor: altColor,\n      source: source,\n      error: error,\n      containerStyle: containerStyle,\n      dimensions: concreteDimensions !== null && concreteDimensions !== void 0 ? concreteDimensions : initialDimensions\n    };\n  }\n\n  if (concreteDimensions != null) {\n    return {\n      type: 'success',\n      alt: alt,\n      altColor: altColor,\n      source: source,\n      onError: onError,\n      containerStyle: containerStyle,\n      imageStyle: (0, _extractImageStyleProps.default)(containerStyle, objectFit),\n      dimensions: concreteDimensions\n    };\n  }\n\n  return {\n    type: 'loading',\n    alt: alt,\n    altColor: altColor,\n    source: source,\n    containerStyle: containerStyle,\n    dimensions: initialDimensions\n  };\n}","map":{"version":3,"sources":["getIMGState.ts"],"names":["onError","type","alt","altColor","source","error","containerStyle","dimensions","concreteDimensions","initialDimensions","imageStyle"],"mappings":";;;;;;;AAQA,IAAA,uBAAA,GAAA,sBAAA,CAAA,OAAA,4BAAA,CAAA;;;;;;;;AAiBO,SAAA,WAAA,OAUiC;AAAA,MAVZ,KAUY,QAVZ,KAUY;AAAA,MAVZ,GAUY,QAVZ,GAUY;AAAA,MAVZ,QAUY,QAVZ,QAUY;AAAA,MAVZ,MAUY,QAVZ,MAUY;AAAA,MAVZ,cAUY,QAVZ,cAUY;AAAA,MAVZ,kBAUY,QAVZ,kBAUY;AAAA,MAVZ,iBAUY,QAVZ,iBAUY;AAAA,MAVZ,SAUY,QAVZ,SAUY;AAAA,MADtCA,OACsC,QADtCA,OACsC;;AACtC,MAAA,KAAA,EAAW;AACT,WAAO;AACLC,MAAAA,IAAI,EADC,OAAA;AAELC,MAAAA,GAFK,EAELA,GAFK;AAGLC,MAAAA,QAHK,EAGLA,QAHK;AAILC,MAAAA,MAJK,EAILA,MAJK;AAKLC,MAAAA,KALK,EAKLA,KALK;AAMLC,MAAAA,cANK,EAMLA,cANK;AAOLC,MAAAA,UAAU,EAAEC,kBAAF,KAAA,IAAEA,IAAAA,kBAAF,KAAA,KAAA,CAAEA,GAAF,kBAAEA,GAAsBC;AAP7B,KAAP;AASD;;AACD,MAAID,kBAAkB,IAAtB,IAAA,EAAgC;AAC9B,WAAO;AACLP,MAAAA,IAAI,EADC,SAAA;AAELC,MAAAA,GAFK,EAELA,GAFK;AAGLC,MAAAA,QAHK,EAGLA,QAHK;AAILC,MAAAA,MAJK,EAILA,MAJK;AAKLJ,MAAAA,OALK,EAKLA,OALK;AAMLM,MAAAA,cANK,EAMLA,cANK;AAOLI,MAAAA,UAAU,EAAE,CAAA,GAAA,uBAAA,CAAA,OAAA,EAAA,cAAA,EAPP,SAOO,CAPP;AAQLH,MAAAA,UAAU,EAAEC;AARP,KAAP;AAUD;;AACD,SAAO;AACLP,IAAAA,IAAI,EADC,SAAA;AAELC,IAAAA,GAFK,EAELA,GAFK;AAGLC,IAAAA,QAHK,EAGLA,QAHK;AAILC,IAAAA,MAJK,EAILA,MAJK;AAKLE,IAAAA,cALK,EAKLA,cALK;AAMLC,IAAAA,UAAU,EAAEE;AANP,GAAP;AAQD","sourcesContent":["import type {\n  UseIMGElementStateProps,\n  IMGElementState,\n  IMGElementStateBase,\n  IMGElementStateError,\n  IMGElementStateSuccess,\n  IMGElementStateLoading\n} from './img-types';\nimport extractImageStyleProps from './extractImageStyleProps';\nimport { ImageDimensions } from '../shared-types';\n\ninterface GetStateProps<C> extends Omit<IMGElementStateBase, 'dimensions'> {\n  concreteDimensions: C;\n  error: Error | null;\n  initialDimensions: ImageDimensions;\n  objectFit: UseIMGElementStateProps['objectFit'];\n  onError?: (e: Error) => void;\n}\n\nexport function getIMGState(\n  props: GetStateProps<ImageDimensions>\n): IMGElementStateError | IMGElementStateSuccess;\nexport function getIMGState(\n  props: GetStateProps<null | ImageDimensions>\n): IMGElementState;\nexport function getIMGState({\n  error,\n  alt,\n  altColor,\n  source,\n  containerStyle,\n  concreteDimensions,\n  initialDimensions,\n  objectFit,\n  onError\n}: GetStateProps<any>): IMGElementState {\n  if (error) {\n    return {\n      type: 'error',\n      alt,\n      altColor,\n      source,\n      error,\n      containerStyle,\n      dimensions: concreteDimensions ?? initialDimensions\n    };\n  }\n  if (concreteDimensions != null) {\n    return {\n      type: 'success',\n      alt,\n      altColor,\n      source,\n      onError,\n      containerStyle,\n      imageStyle: extractImageStyleProps(containerStyle, objectFit),\n      dimensions: concreteDimensions\n    } as IMGElementStateSuccess;\n  }\n  return {\n    type: 'loading',\n    alt,\n    altColor,\n    source,\n    containerStyle,\n    dimensions: initialDimensions\n  } as IMGElementStateLoading;\n}\n"]},"metadata":{},"sourceType":"script"}