{"ast":null,"code":"\"use strict\";\n\nvar _objectWithoutProperties = require(\"@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _excluded = [\"remoteErrorView\", \"remoteLoadingView\", \"renderersProps\", \"children\", \"renderers\"];\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = RenderHTMLConfigProvider;\nexports.renderHTMLConfigPropTypes = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _RenderersPropsProvider = _interopRequireDefault(require(\"./context/RenderersPropsProvider\"));\n\nvar _SharedPropsProvider = _interopRequireDefault(require(\"./context/SharedPropsProvider\"));\n\nvar _TChildrenRendererContext = _interopRequireDefault(require(\"./context/TChildrenRendererContext\"));\n\nvar _TNodeChildrenRenderer = _interopRequireDefault(require(\"./TNodeChildrenRenderer\"));\n\nvar _TChildrenRenderer = _interopRequireDefault(require(\"./TChildrenRenderer\"));\n\nvar _sourceLoaderContext = _interopRequireWildcard(require(\"./context/sourceLoaderContext\"));\n\nvar _RenderRegistryProvider = _interopRequireDefault(require(\"./context/RenderRegistryProvider\"));\n\nvar _TRenderEngineProvider = require(\"./TRenderEngineProvider\");\n\nvar _useProfiler = _interopRequireDefault(require(\"./hooks/useProfiler\"));\n\nvar _ListStyleSpecsProvider = _interopRequireDefault(require(\"./context/ListStyleSpecsProvider\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nvar childrenRendererContext = {\n  TChildrenRenderer: _TChildrenRenderer.default,\n  TNodeChildrenRenderer: _TNodeChildrenRenderer.default\n};\nvar renderHTMLConfigPropTypes = {\n  bypassAnonymousTPhrasingNodes: _propTypes.default.bool,\n  defaultTextProps: _propTypes.default.object,\n  defaultViewProps: _propTypes.default.object,\n  enableExperimentalBRCollapsing: _propTypes.default.bool,\n  enableExperimentalGhostLinesPrevention: _propTypes.default.bool,\n  enableExperimentalMarginCollapsing: _propTypes.default.bool,\n  remoteErrorView: _propTypes.default.func,\n  remoteLoadingView: _propTypes.default.func,\n  debug: _propTypes.default.bool,\n  computeEmbeddedMaxWidth: _propTypes.default.func,\n  renderersProps: _propTypes.default.object,\n  WebView: _propTypes.default.any,\n  GenericPressable: _propTypes.default.any,\n  defaultWebViewProps: _propTypes.default.object,\n  pressableHightlightColor: _propTypes.default.string,\n  customListStyleSpecs: _propTypes.default.object,\n  renderers: _propTypes.default.object,\n  provideEmbeddedHeaders: _propTypes.default.func\n};\nexports.renderHTMLConfigPropTypes = renderHTMLConfigPropTypes;\n\nfunction RenderHTMLConfigProvider(props) {\n  var remoteErrorView = props.remoteErrorView,\n      remoteLoadingView = props.remoteLoadingView,\n      renderersProps = props.renderersProps,\n      children = props.children,\n      renderers = props.renderers,\n      sharedProps = _objectWithoutProperties(props, _excluded);\n\n  var engine = (0, _TRenderEngineProvider.useAmbientTRenderEngine)();\n  var profile = (0, _useProfiler.default)({\n    prop: 'remoteErrorView or remoteLoadingView'\n  });\n  var sourceLoaderConfig = (0, _react.useMemo)(function () {\n    typeof __DEV__ === 'boolean' && __DEV__ && profile();\n    return {\n      remoteErrorView: remoteErrorView || _sourceLoaderContext.defaultRenderError,\n      remoteLoadingView: remoteLoadingView || _sourceLoaderContext.defaultRenderLoading\n    };\n  }, [remoteErrorView, remoteLoadingView, profile]);\n  return _react.default.createElement(_RenderRegistryProvider.default, {\n    renderers: renderers,\n    elementModels: engine.getHTMLElementsModels()\n  }, _react.default.createElement(_SharedPropsProvider.default, sharedProps, _react.default.createElement(_ListStyleSpecsProvider.default, null, _react.default.createElement(_RenderersPropsProvider.default, {\n    renderersProps: renderersProps\n  }, _react.default.createElement(_TChildrenRendererContext.default.Provider, {\n    value: childrenRendererContext\n  }, _react.default.createElement(_sourceLoaderContext.default.Provider, {\n    value: sourceLoaderConfig\n  }, children))))));\n}\n\nRenderHTMLConfigProvider.propTypes = renderHTMLConfigPropTypes;","map":{"version":3,"sources":["RenderHTMLConfigProvider.tsx"],"names":["childrenRendererContext","TChildrenRenderer","TNodeChildrenRenderer","renderHTMLConfigPropTypes","bypassAnonymousTPhrasingNodes","PropTypes","defaultTextProps","defaultViewProps","enableExperimentalBRCollapsing","enableExperimentalGhostLinesPrevention","enableExperimentalMarginCollapsing","remoteErrorView","remoteLoadingView","debug","computeEmbeddedMaxWidth","renderersProps","WebView","GenericPressable","defaultWebViewProps","pressableHightlightColor","customListStyleSpecs","renderers","provideEmbeddedHeaders","func","sharedProps","engine","profile","prop","sourceLoaderConfig","defaultRenderError","defaultRenderLoading","RenderHTMLConfigProvider"],"mappings":";;;;;;;;;;;AAAA,IAAA,MAAA,GAAA,uBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AACA,IAAA,UAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;;AACA,IAAA,uBAAA,GAAA,sBAAA,CAAA,OAAA,oCAAA,CAAA;;AACA,IAAA,oBAAA,GAAA,sBAAA,CAAA,OAAA,iCAAA,CAAA;;AACA,IAAA,yBAAA,GAAA,sBAAA,CAAA,OAAA,sCAAA,CAAA;;AAEA,IAAA,sBAAA,GAAA,sBAAA,CAAA,OAAA,2BAAA,CAAA;;AACA,IAAA,kBAAA,GAAA,sBAAA,CAAA,OAAA,uBAAA,CAAA;;AACA,IAAA,oBAAA,GAAA,uBAAA,CAAA,OAAA,iCAAA,CAAA;;AAIA,IAAA,uBAAA,GAAA,sBAAA,CAAA,OAAA,oCAAA,CAAA;;AACA,IAAA,sBAAA,GAAA,OAAA,2BAAA;;AACA,IAAA,YAAA,GAAA,sBAAA,CAAA,OAAA,uBAAA,CAAA;;AACA,IAAA,uBAAA,GAAA,sBAAA,CAAA,OAAA,oCAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,uBAAuB,GAAG;AAC9BC,EAAAA,iBAAiB,EAAjBA,kBAAAA,CAD8B,OAAA;AAE9BC,EAAAA,qBAAqB,EAArBA,sBAAAA,CAAAA;AAF8B,CAAhC;AAOO,IAAMC,yBAAoD,GAAG;AAClEC,EAAAA,6BAA6B,EAAEC,UAAAA,CAAAA,OAAAA,CADmC,IAAA;AAElEC,EAAAA,gBAAgB,EAAED,UAAAA,CAAAA,OAAAA,CAFgD,MAAA;AAGlEE,EAAAA,gBAAgB,EAAEF,UAAAA,CAAAA,OAAAA,CAHgD,MAAA;AAIlEG,EAAAA,8BAA8B,EAAEH,UAAAA,CAAAA,OAAAA,CAJkC,IAAA;AAKlEI,EAAAA,sCAAsC,EAAEJ,UAAAA,CAAAA,OAAAA,CAL0B,IAAA;AAMlEK,EAAAA,kCAAkC,EAAEL,UAAAA,CAAAA,OAAAA,CAN8B,IAAA;AAOlEM,EAAAA,eAAe,EAAEN,UAAAA,CAAAA,OAAAA,CAPiD,IAAA;AAQlEO,EAAAA,iBAAiB,EAAEP,UAAAA,CAAAA,OAAAA,CAR+C,IAAA;AASlEQ,EAAAA,KAAK,EAAER,UAAAA,CAAAA,OAAAA,CAT2D,IAAA;AAUlES,EAAAA,uBAAuB,EAAET,UAAAA,CAAAA,OAAAA,CAVyC,IAAA;AAWlEU,EAAAA,cAAc,EAAEV,UAAAA,CAAAA,OAAAA,CAXkD,MAAA;AAYlEW,EAAAA,OAAO,EAAEX,UAAAA,CAAAA,OAAAA,CAZyD,GAAA;AAalEY,EAAAA,gBAAgB,EAAEZ,UAAAA,CAAAA,OAAAA,CAbgD,GAAA;AAclEa,EAAAA,mBAAmB,EAAEb,UAAAA,CAAAA,OAAAA,CAd6C,MAAA;AAelEc,EAAAA,wBAAwB,EAAEd,UAAAA,CAAAA,OAAAA,CAfwC,MAAA;AAgBlEe,EAAAA,oBAAoB,EAAEf,UAAAA,CAAAA,OAAAA,CAhB4C,MAAA;AAiBlEgB,EAAAA,SAAS,EAAEhB,UAAAA,CAAAA,OAAAA,CAjBuD,MAAA;AAkBlEiB,EAAAA,sBAAsB,EAAEjB,UAAAA,CAAAA,OAAAA,CAAUkB;AAlBgC,CAA7D;;;AAyBQ,SAAA,wBAAA,CAAA,KAAA,EAEC;AACd,MAAM,eAAN,GAAA,KAAA,CAAM,eAAN;AAAA,MAAM,iBAAN,GAAA,KAAA,CAAM,iBAAN;AAAA,MAAM,cAAN,GAAA,KAAA,CAAM,cAAN;AAAA,MAAM,QAAN,GAAA,KAAA,CAAM,QAAN;AAAA,MAAM,SAAN,GAAA,KAAA,CAAM,SAAN;AAAA,MAMKC,WANL,4BAAA,KAAA;;AAQA,MAAMC,MAAM,GAAG,CAAA,GAAA,sBAAA,CAAf,uBAAe,GAAf;AACA,MAAMC,OAAO,GAAG,CAAA,GAAA,YAAA,CAAA,OAAA,EAAY;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAAZ,CAAhB;AACA,MAAMC,kBAAkB,GAAG,CAAA,GAAA,MAAA,CAAA,OAAA,EAAQ,YAAM;AACvC,WAAA,OAAA,KAAA,SAAA,IAAA,OAAA,IAA2CF,OAA3C,EAAA;AACA,WAAO;AACLf,MAAAA,eAAe,EAAEA,eAAe,IAAIkB,oBAAAA,CAD/B,kBAAA;AAELjB,MAAAA,iBAAiB,EAAEA,iBAAiB,IAAIkB,oBAAAA,CAAAA;AAFnC,KAAP;AAFyB,GAAA,EAMxB,CAAA,eAAA,EAAA,iBAAA,EANH,OAMG,CANwB,CAA3B;AAOA,SACE,MAAA,CAAA,OAAA,CAAA,aAAA,CAAC,uBAAA,CAAD,OAAA,EAAA;AACE,IAAA,SAAS,EADX,SAAA;AAEE,IAAA,aAAa,EAAEL,MAAM,CAANA,qBAAAA;AAFjB,GAAA,EAGE,MAAA,CAAA,OAAA,CAAA,aAAA,CAAC,oBAAA,CAAD,OAAA,EAAA,WAAA,EACE,MAAA,CAAA,OAAA,CAAA,aAAA,CAAC,uBAAA,CAAD,OAAA,EAAA,IAAA,EACE,MAAA,CAAA,OAAA,CAAA,aAAA,CAAC,uBAAA,CAAD,OAAA,EAAA;AAAwB,IAAA,cAAc,EAAEV;AAAxC,GAAA,EACE,MAAA,CAAA,OAAA,CAAA,aAAA,CAAC,yBAAA,CAAD,OAAC,CAAD,QAAA,EAAA;AAAoC,IAAA,KAAK,EAAEf;AAA3C,GAAA,EACE,MAAA,CAAA,OAAA,CAAA,aAAA,CAAC,oBAAA,CAAD,OAAC,CAAD,QAAA,EAAA;AAA8B,IAAA,KAAK,EAAE4B;AAArC,GAAA,EARZ,QAQY,CADF,CADF,CADF,CADF,CAHF,CADF;AAiBD;;AAKDG,wBAAwB,CAAxBA,SAAAA,GAAAA,yBAAAA","sourcesContent":["import React, { PropsWithChildren, ReactElement, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport RenderersPropsProvider from './context/RenderersPropsProvider';\nimport SharedPropsProvider from './context/SharedPropsProvider';\nimport TChildrenRenderersContext from './context/TChildrenRendererContext';\nimport { RenderHTMLConfig } from './shared-types';\nimport TNodeChildrenRenderer from './TNodeChildrenRenderer';\nimport TChildrenRenderer from './TChildrenRenderer';\nimport sourceLoaderContext, {\n  defaultRenderError,\n  defaultRenderLoading\n} from './context/sourceLoaderContext';\nimport RenderRegistryProvider from './context/RenderRegistryProvider';\nimport { useAmbientTRenderEngine } from './TRenderEngineProvider';\nimport useProfiler from './hooks/useProfiler';\nimport ListStyleSpecsProvider from './context/ListStyleSpecsProvider';\n\nconst childrenRendererContext = {\n  TChildrenRenderer,\n  TNodeChildrenRenderer\n};\n\nexport type RenderHTMLConfigPropTypes = Record<keyof RenderHTMLConfig, any>;\n\nexport const renderHTMLConfigPropTypes: RenderHTMLConfigPropTypes = {\n  bypassAnonymousTPhrasingNodes: PropTypes.bool,\n  defaultTextProps: PropTypes.object,\n  defaultViewProps: PropTypes.object,\n  enableExperimentalBRCollapsing: PropTypes.bool,\n  enableExperimentalGhostLinesPrevention: PropTypes.bool,\n  enableExperimentalMarginCollapsing: PropTypes.bool,\n  remoteErrorView: PropTypes.func,\n  remoteLoadingView: PropTypes.func,\n  debug: PropTypes.bool,\n  computeEmbeddedMaxWidth: PropTypes.func,\n  renderersProps: PropTypes.object,\n  WebView: PropTypes.any,\n  GenericPressable: PropTypes.any,\n  defaultWebViewProps: PropTypes.object,\n  pressableHightlightColor: PropTypes.string,\n  customListStyleSpecs: PropTypes.object,\n  renderers: PropTypes.object,\n  provideEmbeddedHeaders: PropTypes.func\n};\n\n/**\n * A component to provide configuration for {@link RenderHTMLSource}\n * descendants, to be used in conjunction with {@link TRenderEngineProvider}.\n */\nexport default function RenderHTMLConfigProvider(\n  props: PropsWithChildren<RenderHTMLConfig>\n): ReactElement {\n  const {\n    remoteErrorView,\n    remoteLoadingView,\n    renderersProps,\n    children,\n    renderers,\n    ...sharedProps\n  } = props;\n  const engine = useAmbientTRenderEngine();\n  const profile = useProfiler({ prop: 'remoteErrorView or remoteLoadingView' });\n  const sourceLoaderConfig = useMemo(() => {\n    typeof __DEV__ === 'boolean' && __DEV__ && profile();\n    return {\n      remoteErrorView: remoteErrorView || defaultRenderError,\n      remoteLoadingView: remoteLoadingView || defaultRenderLoading\n    };\n  }, [remoteErrorView, remoteLoadingView, profile]);\n  return (\n    <RenderRegistryProvider\n      renderers={renderers}\n      elementModels={engine.getHTMLElementsModels()}>\n      <SharedPropsProvider {...sharedProps}>\n        <ListStyleSpecsProvider>\n          <RenderersPropsProvider renderersProps={renderersProps}>\n            <TChildrenRenderersContext.Provider value={childrenRendererContext}>\n              <sourceLoaderContext.Provider value={sourceLoaderConfig}>\n                {children}\n              </sourceLoaderContext.Provider>\n            </TChildrenRenderersContext.Provider>\n          </RenderersPropsProvider>\n        </ListStyleSpecsProvider>\n      </SharedPropsProvider>\n    </RenderRegistryProvider>\n  );\n}\n\n/**\n * @ignore\n */\nRenderHTMLConfigProvider.propTypes = renderHTMLConfigPropTypes;\n"]},"metadata":{},"sourceType":"script"}