{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = tnodeSnapshot;\n\nfunction printTableStyles(styles) {\n  var entries = Object.entries(styles);\n  return entries.reduce(function (prev, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        name = _ref2[0],\n        val = _ref2[1];\n\n    return \"\" + prev + (prev ? ',' : '') + \" \" + name + \": \" + JSON.stringify(val);\n  }, '');\n}\n\nfunction tnodePropertiesString(tnode, _ref3) {\n  var withNodeIndex = _ref3.withNodeIndex,\n      withStyles = _ref3.withStyles;\n\n  var _tnode$classes;\n\n  var tagPrint = tnode.tagName ? \"tagName=\\\"\" + tnode.tagName + \"\\\"\" : 'anonymous';\n  var unregisteredPrint = tnode.isUnregistered ? 'unregistered' : null;\n  var indexPrint = withNodeIndex ? \"nodeIndex={\" + tnode.nodeIndex + \"}\" : null;\n  var idPrint = tnode.id ? \"id=\" + tnode.id : null;\n  var classesPrint = (_tnode$classes = tnode.classes) !== null && _tnode$classes !== void 0 && _tnode$classes.length ? \"classes={[\" + tnode.classes.join(', ') + \"]}\" : null;\n  var dataPrint = tnode.type === 'text' ? \"data=\" + JSON.stringify(tnode.data) : null;\n  var anchorPrint = typeof tnode.attributes.href === 'string' ? \"href=\" + JSON.stringify(tnode.attributes.href) : null;\n  var srcPrint = typeof tnode.attributes.src === 'string' ? \"src=\" + JSON.stringify(tnode.attributes.src) : null;\n  var pstyles = withStyles ? printTableStyles(tnode.getNativeStyles()) : null;\n  var nativeStylesPrint = pstyles ? \"nativeStyles={{\" + pstyles + \" }}\" : null;\n  var oStyles = withStyles ? printTableStyles(tnode.getWebStyles()) : null;\n  var webStylesPrint = oStyles ? \"webStyles={{\" + oStyles + \"}}\" : null;\n  var detailsPrint = [tagPrint, unregisteredPrint, indexPrint, idPrint, classesPrint, dataPrint, anchorPrint, srcPrint, nativeStylesPrint, webStylesPrint].filter(function (p) {\n    return p !== null;\n  }).join(' ');\n  return \"<\" + tnode.displayName + \" \" + detailsPrint;\n}\n\nfunction tnodeSnapshot(tnode, params) {\n  var _params$parentLeftPre = params.parentLeftPrefix,\n      parentLeftPrefix = _params$parentLeftPre === void 0 ? '' : _params$parentLeftPre,\n      _params$isChild = params.isChild,\n      isChild = _params$isChild === void 0 ? false : _params$isChild,\n      _params$isLast = params.isLast,\n      isLast = _params$isLast === void 0 ? true : _params$isLast,\n      withStyles = params.withStyles,\n      withNodeIndex = params.withNodeIndex;\n  var prefix = isChild ? '  ' : '';\n  var totalPrefixLeft = parentLeftPrefix + prefix;\n  var childrenPrint = tnode.children.map(function (c, i) {\n    return tnodeSnapshot(c, {\n      parentLeftPrefix: parentLeftPrefix + ''.padStart(prefix.length, ' '),\n      isChild: true,\n      isLast: i === tnode.children.length - 1,\n      withStyles: withStyles,\n      withNodeIndex: withNodeIndex\n    });\n  }).join('');\n  return \"\" + totalPrefixLeft + tnodePropertiesString(tnode, {\n    withStyles: withStyles,\n    withNodeIndex: withNodeIndex\n  }) + (childrenPrint ? \">\\n\" + childrenPrint + \"\\n\" + totalPrefixLeft + \"</\" + tnode.displayName + \">\" : ' />') + (isLast ? '' : '\\n');\n}","map":{"version":3,"sources":["tnodeSnapshot.ts"],"names":["entries","Object","prev","name","JSON","withStyles","tagPrint","tnode","unregisteredPrint","indexPrint","withNodeIndex","idPrint","classesPrint","dataPrint","anchorPrint","srcPrint","pstyles","printTableStyles","nativeStylesPrint","oStyles","webStylesPrint","detailsPrint","p","displayName","parentLeftPrefix","isChild","isLast","prefix","totalPrefixLeft","childrenPrint","tnodeSnapshot","i","tnodePropertiesString"],"mappings":";;;;;;;;;AAEA,SAAA,gBAAA,CAAA,MAAA,EAAuD;AACrD,MAAMA,OAAO,GAAGC,MAAM,CAANA,OAAAA,CAAhB,MAAgBA,CAAhB;AACA,SAAO,OAAO,CAAP,MAAA,CAAe,UAAA,IAAA,QAAuB;AAAA;AAAA,QAAhB,IAAgB;AAAA,QAAvB,GAAuB;;AAC3C,gBAAUC,IAAV,IAAiBA,IAAI,GAAA,GAAA,GAAS,EAA9B,UAAoCC,IAApC,UAA6CC,IAAI,CAAJA,SAAAA,CAA7C,GAA6CA,CAA7C;AADK,GAAA,EAAP,EAAO,CAAP;AAGD;;AAED,SAAA,qBAAA,CAAA,KAAA,SAGE;AAAA,MADA,aACA,SADA,aACA;AAAA,MADiBC,UACjB,SADiBA,UACjB;;AAAA,MAAA,cAAA;;AACA,MAAMC,QAAQ,GAAGC,KAAK,CAALA,OAAAA,kBAA4BA,KAAK,CAAjCA,OAAAA,UAAjB,WAAA;AACA,MAAMC,iBAAiB,GAAGD,KAAK,CAALA,cAAAA,GAAAA,cAAAA,GAA1B,IAAA;AACA,MAAME,UAAU,GAAGC,aAAa,mBAAiBH,KAAK,CAAtB,SAAA,SAAhC,IAAA;AACA,MAAMI,OAAO,GAAGJ,KAAK,CAALA,EAAAA,WAAiBA,KAAK,CAAtBA,EAAAA,GAAhB,IAAA;AACA,MAAMK,YAAY,GAAG,CAAA,cAAA,GAAA,KAAK,CAAL,OAAA,MAAA,IAAA,IAAA,cAAA,KAAA,KAAA,CAAA,IAAA,cAAA,CAAA,MAAA,kBACJL,KAAK,CAALA,OAAAA,CAAAA,IAAAA,CADI,IACJA,CADI,UAArB,IAAA;AAGA,MAAMM,SAAS,GACbN,KAAK,CAALA,IAAAA,KAAAA,MAAAA,aAAgCH,IAAI,CAAJA,SAAAA,CAAeG,KAAK,CAApDA,IAAgCH,CAAhCG,GADF,IAAA;AAEA,MAAMO,WAAW,GACf,OAAOP,KAAK,CAALA,UAAAA,CAAP,IAAA,KAAA,QAAA,aACYH,IAAI,CAAJA,SAAAA,CAAeG,KAAK,CAALA,UAAAA,CAD3B,IACYH,CADZ,GADF,IAAA;AAIA,MAAMW,QAAQ,GACZ,OAAOR,KAAK,CAALA,UAAAA,CAAP,GAAA,KAAA,QAAA,YACWH,IAAI,CAAJA,SAAAA,CAAeG,KAAK,CAALA,UAAAA,CAD1B,GACWH,CADX,GADF,IAAA;AAIA,MAAMY,OAAO,GAAGX,UAAU,GAAGY,gBAAgB,CAACV,KAAK,CAAzB,eAAoBA,EAAD,CAAnB,GAA1B,IAAA;AACA,MAAMW,iBAAiB,GAAGF,OAAO,uBAAA,OAAA,WAAjC,IAAA;AACA,MAAMG,OAAO,GAAGd,UAAU,GAAGY,gBAAgB,CAACV,KAAK,CAAzB,YAAoBA,EAAD,CAAnB,GAA1B,IAAA;AACA,MAAMa,cAAc,GAAGD,OAAO,oBAAA,OAAA,UAA9B,IAAA;AACA,MAAME,YAAY,GAAG,CAAA,QAAA,EAAA,iBAAA,EAAA,UAAA,EAAA,OAAA,EAAA,YAAA,EAAA,SAAA,EAAA,WAAA,EAAA,QAAA,EAAA,iBAAA,EAAA,cAAA,EAAA,MAAA,CAYVC,UAAAA,CAAD;AAAA,WAAOA,CAAC,KAZG,IAYX;AAAA,GAZW,EAAA,IAAA,CAArB,GAAqB,CAArB;AAcA,eAAWf,KAAK,CAACgB,WAAjB,SAAA,YAAA;AACD;;AAQc,SAAA,aAAA,CAAA,KAAA,EAAA,MAAA,EAGL;AACR,8BAAA,MAAA,CACEC,gBADF;AAAA,MACEA,gBADF,sCAAM,EAAN;AAAA,wBAAA,MAAA,CAEEC,OAFF;AAAA,MAEEA,OAFF,gCAAM,KAAN;AAAA,uBAAA,MAAA,CAGEC,MAHF;AAAA,MAGEA,MAHF,+BAAM,IAAN;AAAA,MAAM,UAAN,GAAA,MAAA,CAAM,UAAN;AAAA,MAKEhB,aALF,GAAA,MAAA,CAKEA,aALF;AAOA,MAAMiB,MAAM,GAAGF,OAAO,GAAA,IAAA,GAAtB,EAAA;AACA,MAAMG,eAAe,GAAGJ,gBAAgB,GAAxC,MAAA;AACA,MAAMK,aAAa,GAAG,KAAK,CAAL,QAAA,CAAA,GAAA,CACf,UAAA,CAAA,EAAA,CAAA;AAAA,WACHC,aAAa,CAAA,CAAA,EAAI;AACfN,MAAAA,gBAAgB,EAAEA,gBAAgB,GAAG,GAAA,QAAA,CAAYG,MAAM,CAAlB,MAAA,EADtB,GACsB,CADtB;AAEfF,MAAAA,OAAO,EAFQ,IAAA;AAGfC,MAAAA,MAAM,EAAEK,CAAC,KAAKxB,KAAK,CAALA,QAAAA,CAAAA,MAAAA,GAHC,CAAA;AAIfF,MAAAA,UAJe,EAIfA,UAJe;AAKfK,MAAAA,aAAAA,EAAAA;AALe,KAAJ,CADV;AAAA,GADe,EAAA,IAAA,CAAtB,EAAsB,CAAtB;AAWA,cAAUkB,eAAV,GAA4BI,qBAAqB,CAAA,KAAA,EAAQ;AACvD3B,IAAAA,UADuD,EACvDA,UADuD;AAEvDK,IAAAA,aAAAA,EAAAA;AAFuD,GAAR,CAAjD,IAIEmB,aAAa,WACHA,aADG,UACeD,eADf,UACmCrB,KAAK,CADxC,WAAA,SAET,KANN,KAOGmB,MAAM,GAAA,EAAA,GAPT,IAAA;AAQD","sourcesContent":["import { TNode, TNodePrintOptions } from './tree-types';\n\nfunction printTableStyles(styles: Record<string, any>) {\n  const entries = Object.entries(styles);\n  return entries.reduce((prev, [name, val]) => {\n    return `${prev}${prev ? ',' : ''} ${name}: ${JSON.stringify(val)}`;\n  }, '');\n}\n\nfunction tnodePropertiesString(\n  tnode: TNode,\n  { withNodeIndex, withStyles }: TNodePrintOptions\n) {\n  const tagPrint = tnode.tagName ? `tagName=\"${tnode.tagName}\"` : 'anonymous';\n  const unregisteredPrint = tnode.isUnregistered ? 'unregistered' : null;\n  const indexPrint = withNodeIndex ? `nodeIndex={${tnode.nodeIndex}}` : null;\n  const idPrint = tnode.id ? `id=${tnode.id}` : null;\n  const classesPrint = tnode.classes?.length\n    ? `classes={[${tnode.classes.join(', ')}]}`\n    : null;\n  const dataPrint =\n    tnode.type === 'text' ? `data=${JSON.stringify(tnode.data)}` : null;\n  const anchorPrint =\n    typeof tnode.attributes.href === 'string'\n      ? `href=${JSON.stringify(tnode.attributes.href)}`\n      : null;\n  const srcPrint =\n    typeof tnode.attributes.src === 'string'\n      ? `src=${JSON.stringify(tnode.attributes.src)}`\n      : null;\n  const pstyles = withStyles ? printTableStyles(tnode.getNativeStyles()) : null;\n  const nativeStylesPrint = pstyles ? `nativeStyles={{${pstyles} }}` : null;\n  const oStyles = withStyles ? printTableStyles(tnode.getWebStyles()) : null;\n  const webStylesPrint = oStyles ? `webStyles={{${oStyles}}}` : null;\n  const detailsPrint = [\n    tagPrint,\n    unregisteredPrint,\n    indexPrint,\n    idPrint,\n    classesPrint,\n    dataPrint,\n    anchorPrint,\n    srcPrint,\n    nativeStylesPrint,\n    webStylesPrint\n  ]\n    .filter((p) => p !== null)\n    .join(' ');\n  return `<${tnode.displayName} ${detailsPrint}`;\n}\n\ninterface TNodePrintState {\n  parentLeftPrefix: string;\n  isChild: boolean;\n  isLast: boolean;\n}\n\nexport default function tnodeSnapshot(\n  tnode: TNode,\n  params: Partial<TNodePrintState> & TNodePrintOptions\n): string {\n  const {\n    parentLeftPrefix = '',\n    isChild = false,\n    isLast = true,\n    withStyles,\n    withNodeIndex\n  } = params;\n  const prefix = isChild ? '  ' : '';\n  const totalPrefixLeft = parentLeftPrefix + prefix;\n  const childrenPrint = tnode.children\n    .map((c, i) =>\n      tnodeSnapshot(c, {\n        parentLeftPrefix: parentLeftPrefix + ''.padStart(prefix.length, ' '),\n        isChild: true,\n        isLast: i === tnode.children.length - 1,\n        withStyles,\n        withNodeIndex\n      })\n    )\n    .join('');\n  return `${totalPrefixLeft}${tnodePropertiesString(tnode, {\n    withStyles,\n    withNodeIndex\n  })}${\n    childrenPrint\n      ? `>\\n${childrenPrint}\\n${totalPrefixLeft}</${tnode.displayName}>`\n      : ' />'\n  }${isLast ? '' : '\\n'}`;\n}\n"]},"metadata":{},"sourceType":"script"}