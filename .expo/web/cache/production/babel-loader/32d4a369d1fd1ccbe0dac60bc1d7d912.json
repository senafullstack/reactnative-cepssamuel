{"ast":null,"code":"\"use strict\";var _defineProperty=require(\"@babel/runtime/helpers/defineProperty\");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}Object.defineProperty(exports,\"__esModule\",{value:true});exports.useAElementProps=useAElementProps;exports.default=void 0;var _react=_interopRequireDefault(require(\"react\"));var _useNormalizedUrl=_interopRequireDefault(require(\"../hooks/useNormalizedUrl\"));var _DocumentMetadataProvider=require(\"../context/DocumentMetadataProvider\");var _RenderersPropsProvider=require(\"../context/RenderersPropsProvider\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function useAnchorOnLinkPress(tnode,onPress){var href=tnode.attributes.href;var normalizedHref=(0,_useNormalizedUrl.default)(href);var _ref=(0,_DocumentMetadataProvider.useDocumentMetadata)(),baseTarget=_ref.baseTarget;var shouldHandleLinkPress=tnode.tagName==='a'&&typeof normalizedHref==='string'&&href.length>0&&typeof onPress==='function';return shouldHandleLinkPress?function(e){return onPress(e,normalizedHref,tnode.attributes,tnode.attributes.target||baseTarget);}:undefined;}function useAElementProps(props){var tnode=props.tnode;var _ref2=(0,_RenderersPropsProvider.useRendererProps)('a'),onPress=_ref2.onPress;var syntheticAnchorOnLinkPress=useAnchorOnLinkPress(tnode,onPress);if(typeof syntheticAnchorOnLinkPress!=='function'){return props;}return _objectSpread(_objectSpread({},props),{},{onPress:syntheticAnchorOnLinkPress});}var ARenderer=function ARenderer(props){return _react.default.createElement(props.TDefaultRenderer,useAElementProps(props));};var _default=ARenderer;exports.default=_default;","map":{"version":3,"sources":["ARenderer.tsx"],"names":["href","tnode","normalizedHref","baseTarget","shouldHandleLinkPress","e","onPress","syntheticAnchorOnLinkPress","useAnchorOnLinkPress","ARenderer","props","React","useAElementProps"],"mappings":"0+BAAA,GAAA,CAAA,MAAA,CAAA,sBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA,CAKA,GAAA,CAAA,iBAAA,CAAA,sBAAA,CAAA,OAAA,6BAAA,CAAA,CACA,GAAA,CAAA,yBAAA,CAAA,OAAA,uCAAA,CACA,GAAA,CAAA,uBAAA,CAAA,OAAA,qCAAA,C,mFAEA,QAAA,CAAA,oBAAA,CAAA,KAAA,CAAA,OAAA,CAGE,CACA,GAAMA,CAAAA,IAAY,CAAGC,KAAK,CAALA,UAAAA,CAArB,IAAA,CACA,GAAMC,CAAAA,cAAc,CAAG,CAAA,EAAA,iBAAA,CAAA,OAAA,EAAvB,IAAuB,CAAvB,CACA,SAAuB,CAAA,EAAA,yBAAA,CAAvB,mBAAuB,GAAvB,CAAQC,UAAR,MAAQA,UAAR,CACA,GAAMC,CAAAA,qBAAqB,CACzBH,KAAK,CAALA,OAAAA,GAAAA,GAAAA,EACA,MAAA,CAAA,cAAA,GADAA,QAAAA,EAEAD,IAAI,CAAJA,MAAAA,CAFAC,CAAAA,EAGA,MAAA,CAAA,OAAA,GAJF,UAAA,CAKA,MAAOG,CAAAA,qBAAqB,CACvBC,SAAAA,CAAD,QACEC,CAAAA,OAAO,CAAA,CAAA,CAAA,cAAA,CAGLL,KAAK,CAHA,UAAA,CAIJA,KAAK,CAALA,UAAAA,CAAD,MAACA,EANmB,UAEf,CADT,EADwB,CAA5B,SAAA,CAUD,CAEM,QAAA,CAAA,gBAAA,CAAA,KAAA,CAEqB,CAC1B,GAAQA,CAAAA,KAAR,CAAA,KAAA,CAAQA,KAAR,CACA,UAAoB,CAAA,EAAA,uBAAA,CAAA,gBAAA,EAApB,GAAoB,CAApB,CAAQK,OAAR,OAAQA,OAAR,CACA,GAAMC,CAAAA,0BAA0B,CAAGC,oBAAoB,CAAA,KAAA,CAAvD,OAAuD,CAAvD,CACA,GAAI,MAAA,CAAA,0BAAA,GAAJ,UAAA,CAAsD,CACpD,MAAA,CAAA,KAAA,CACD,CACD,sCAAO,KAAP,MAEEF,OAAO,CAAEC,0BAFX,GAID,CAED,GAAME,CAAAA,SAAgC,CAAIC,QAApCD,CAAAA,SAAoCC,CAAAA,KAAD,CAAW,CAClD,MAAOC,CAAAA,MAAAA,CAAAA,OAAAA,CAAAA,aAAAA,CAAoBD,KAAK,CAAzBC,gBAAAA,CAA4CC,gBAAgB,CAAnE,KAAmE,CAA5DD,CAAP,CADF,CAAA,C,aAIeF,S","sourcesContent":["import React from 'react';\nimport { InternalMixedRenderer } from '../render/render-types';\nimport { TNode, DocumentContext } from '@native-html/transient-render-engine';\nimport { InternalRendererProps, RenderersProps } from '../shared-types';\nimport { GestureResponderEvent } from 'react-native';\nimport useNormalizedUrl from '../hooks/useNormalizedUrl';\nimport { useDocumentMetadata } from '../context/DocumentMetadataProvider';\nimport { useRendererProps } from '../context/RenderersPropsProvider';\n\nfunction useAnchorOnLinkPress(\n  tnode: TNode,\n  onPress: RenderersProps['a']['onPress']\n) {\n  const href: string = tnode.attributes.href;\n  const normalizedHref = useNormalizedUrl(href);\n  const { baseTarget } = useDocumentMetadata();\n  const shouldHandleLinkPress =\n    tnode.tagName === 'a' &&\n    typeof normalizedHref === 'string' &&\n    href.length > 0 &&\n    typeof onPress === 'function';\n  return shouldHandleLinkPress\n    ? (e: GestureResponderEvent) =>\n        onPress!(\n          e,\n          normalizedHref,\n          tnode.attributes,\n          (tnode.attributes.target as DocumentContext['baseTarget']) ||\n            baseTarget\n        )\n    : undefined;\n}\n\nexport function useAElementProps<T extends TNode>(\n  props: InternalRendererProps<T>\n): InternalRendererProps<T> {\n  const { tnode } = props;\n  const { onPress } = useRendererProps('a');\n  const syntheticAnchorOnLinkPress = useAnchorOnLinkPress(tnode, onPress);\n  if (typeof syntheticAnchorOnLinkPress !== 'function') {\n    return props;\n  }\n  return {\n    ...props,\n    onPress: syntheticAnchorOnLinkPress\n  };\n}\n\nconst ARenderer: InternalMixedRenderer = (props) => {\n  return React.createElement(props.TDefaultRenderer, useAElementProps(props));\n};\n\nexport default ARenderer;\n"]},"metadata":{},"sourceType":"script"}